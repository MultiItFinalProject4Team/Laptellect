<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>노트북 추천 설문</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .option-container { display: flex; flex-direction: column; }
        .option-group { margin-bottom: 20px; }
        .option { margin: 5px; padding: 10px; border: 1px solid #ccc; cursor: pointer; display: inline-block; }
        .option.selected { background-color: #e0e0e0; }
        .hidden { display: none; }
    </style>
</head>
<body>
<h1>어떤 노트북을 원하세요?</h1>

<div class="option-container">
    <!-- 용도 선택 -->
    <div class="option-group" id="usage-group">
        <h2>용도</h2>
        <div class="option" data-category="usage" data-value="gaming">게이밍</div>
        <div class="option" data-category="usage" data-value="office">사무용</div>
    </div>

    <!-- 게이밍 옵션 -->
    <div class="option-group hidden" id="gaming-group">
        <h2>게임 종류</h2>
        <div class="option" data-category="game-type" data-value="steam-fps">스팀게임/FPS 게임</div>
        <div class="option" data-category="game-type" data-value="online">온라인 게임</div>
        <div class="option" data-category="game-type" data-value="aos">AOS게임</div>
    </div>

    <!-- 사무용 옵션 -->
    <div class="option-group hidden" id="office-group">
        <h2>사무용 종류</h2>
        <div class="option" data-category="office-type" data-value="coding">코딩할거에요</div>
        <div class="option" data-category="office-type" data-value="student">학생이에요</div>
    </div>

    <!-- 가격대 -->
    <div class="option-group">
        <h2>가격대</h2>
        <div class="option" data-category="price" data-value="budget">가성비용</div>
        <div class="option" data-category="price" data-value="performance">성능용</div>
        <div class="option" data-category="price" data-value="balanced">밸런스용</div>
        <div class="option" data-category="price" data-value="any">알아서</div>
    </div>

    <!-- 무게 -->
    <div class="option-group">
        <h2>무게</h2>
        <div class="option" data-category="weight" data-value="heavy">집에만 둘거에요</div>
        <div class="option" data-category="weight" data-value="light">가져 다닐거에요</div>
        <div class="option" data-category="weight" data-value="any">알아서</div>
    </div>

    <!-- 화면 크기 -->
    <div class="option-group">
        <h2>화면 크기</h2>
        <div class="option" data-category="screen" data-value="large">화면 넓은게 좋아요</div>
        <div class="option" data-category="screen" data-value="medium">적당한게 좋아요</div>
        <div class="option" data-category="screen" data-value="any">알아서</div>
    </div>

    <!-- 우선순위 -->
    <div class="option-group">
        <h2>우선순위</h2>
        <div class="option" data-category="priority" data-value="usage">하고 싶은 작업을 우선해 주세요</div>
        <div class="option" data-category="priority" data-value="screen">화면을 우선해 주세요</div>
        <div class="option" data-category="priority" data-value="weight">무게를 우선해주세요</div>
        <div class="option" data-category="priority" data-value="any">없으면 알아서 추천해주세요</div>
    </div>
</div>

<div class="button-container">
    <button id="nextBtn">추천 받기</button>
</div>

<script>
    $(document).ready(function() {
        let userPreferences = {};

        $('.option').click(function() {
            let category = $(this).data('category');
            let value = $(this).data('value');

            $(this).siblings('.option').removeClass('selected');
            $(this).toggleClass('selected');

            if ($(this).hasClass('selected')) {
                userPreferences[category] = value;
            } else {
                delete userPreferences[category];
            }

            if (category === 'usage') {
                if (value === 'gaming') {
                    $('#gaming-group').removeClass('hidden');
                    $('#office-group').addClass('hidden');
                } else if (value === 'office') {
                    $('#office-group').removeClass('hidden');
                    $('#gaming-group').addClass('hidden');
                }
            }
        });

        $('#nextBtn').click(function() {
            $.ajax({
                url: '/api/recommendation',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(userPreferences),
                success: function(response) {
                    window.location.href = 'recommendpage.html?recommendations=' + encodeURIComponent(JSON.stringify(response));
                },
                error: function(xhr, status, error) {
                    console.error("Error:", error);
                }
            });
        });
    });
</script>
</body>
</html>